<div class="giscus-wrapper"></div>

<script>
  import { getTheme } from "@utils/theme";

  const $wrapper = document.querySelector(".giscus-wrapper");
  const giscus = document.createElement("script");
  const theme = getTheme() === "dark" ? "dark_high_contrast" : "light";
  const giscusAttributes = {
    src: "https://giscus.app/client.js",
    "data-repo": "jaeung-E/woong.log",
    "data-repo-id": "R_kgDOI5OyNw",
    "data-category": "Announcements",
    "data-category-id": "DIC_kwDOI5OyN84CURHi",
    "data-mapping": "title",
    "data-strict": "0",
    "data-reactions-enabled": "1",
    "data-emit-metadata": "0",
    "data-input-position": "top",
    "data-theme": theme,
    "data-lang": "ko",
    crossorigin: "anonymous",
    async: "",
  };

  Object.entries(giscusAttributes).forEach(([key, value]) => {
    giscus?.setAttribute(key, value);
  });

  $wrapper?.appendChild(giscus);
</script>
